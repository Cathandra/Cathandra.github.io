---
layout: post
title: "Apollo自动驾驶入门课程(三)定位"
date: 2022-01-12 14:16:28
tags:
	- Automation
categories: [] 
---

## 定位

本部分介绍定位。

## 快速回忆

1. 主流定位方法有哪些？原理是什么？各自的优缺点是什么？

<!--more-->

## GNSS RTK

- 定位方法

GNSS系统利用三角测量的方法，使用三颗卫星和一颗定位高度的卫星来确认物体的位置。GNSS系统中被最广泛使用的是GPS。

![GPS定位](gps.jpg)

GPS定位过程中通过测量信号的传递时间来计算接收器与卫星的距离，速度C用光速计算。由于光速的值很大，即使是少量的时间误差也会在距离计算中造成巨大的误差。因此，每颗卫星都配备了高精确度的原子钟。

$Distance = C × Time$

为进一步减小误差，使用实时运动定位（RTK）。

![](rtk.png)

RTK修正误差的方法是：在地面建几个基站，基站的精确地面位置已知；基站也通过GPS测量自己的位置，GPS测量得出的位置与真实位置的偏差就能用于修正其他物体的位置。

- 缺点

高楼等障碍物可能阻挡GPS信号；

在山间、峡谷或地下隧道可能长时间没有GPS更新；

GPS 的更新频率很低，大约为 10 赫兹。由于无人驾驶车在快速移动，可能需要更频繁地更新位置。

## 惯性导航

- 定位方法

**惯性测量单元（IMU）**利用加速度计和陀螺仪，提供车辆的速度、加速度和方向，在起始位置已知的条件下就可以提供接近实时的位置信息。IMU 可以以高频率更新，可达 1000 赫兹。

- 缺点

运动误差随时间增加而增加，只能依靠IMU在很短的时间范围内进行定位。

## 激光雷达定位

- 定位方法

该方法将来自激光雷达传感器的检测数据与预先存在的高精地图之间匹配，通过这种比较可获知汽车在高精度地图上的全球位置和行驶方向。

匹配算法包括：迭代最近点（ICP）、滤波算法、卡尔曼滤波等。

- 优缺点

LiDAR定位的主要优势在于稳健性，只要从高精地图开始并且存在有效的传感器，就始终能够进行定位。

主要缺点在于难以构建高精地图并使其保持最新，事实上几乎不可能让地图完全保持最新，因为几乎每个地图均包含瞬态元素，汽车、行人、停放的汽车、垃圾等。

## 视觉定位

- 定位方法

将道路摄像头图像与地图进行比较，该过程称为**粒子滤波**。

- 优缺点

视觉定位的优点在于图像数据很容易获得，缺点在于缺乏三维信息和对三维地图的依赖。

## Apollo定位

Apollo使用基于GPS、IMU、激光雷达的多传感器融合定位系统，这些传感器同时支持 GNSS 定位和LiDAR 定位，GNSS 定位输出位置和速度信息，LiDAR 定位输出位置和行进方向信息。融合框架通过卡尔曼滤波将这些输出结合在一起。

卡尔曼滤波建立在两步预测测量周期之上，在Apollo中，惯性导航解决方案用于卡尔曼滤波的预测步骤，GNSS 和 LiDAR 定位用于卡尔曼滤波的测量结果更新步骤。

## 参考资料

1. [优达学城-无人驾驶第一课：从Apollo起步](https://apollo.auto/devcenter/coursevideo_cn.html)
2. [Apollo自动驾驶入门课程第③讲 — 定位](https://mp.weixin.qq.com/s?__biz=MzI1NjkxOTMyNQ==&mid=2247485279&idx=1&sn=0c68c0442b6316930e033ef7d71ee166&chksm=ea1e152ddd699c3b9ee2a852a3caedd0b81bd4539125281740c278f5fec68f7eb827211251b9&scene=21#wechat_redirect)
